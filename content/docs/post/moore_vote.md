---
title: "摩尔投票法"
date: 2021-10-22T11:22:15+08:00
draft: true
---

# 摩尔投票法

## 场景

现在需要票选一位候选人，要求该票数需要超过总票数的一半

## 方法

遍历所有选票：

* 一开始遍历到的两个不一样的候选人，此时记录两个人的票数都为1
* 接下来遍历到与之前候选人相同的票，则相应的候选人票数+1
* 接下来遍历到与之前候选人不同的票，则将之前候选人的票数都减1
* 如果之前候选人的票数已经降为0，说明票数已经抵消完了，则下一个遍历到的新的候选人票数+1，从这位新的候选人这里重新计票

遍历完毕之后，需要看剩下的候选人得票，超过总票数一半的候选人获胜

## 应用

### 求众数II

*原题链接：https://leetcode-cn.com/problems/majority-element-ii/*

```
给定一个大小为 n 的整数数组，找出其中所有出现超过 ⌊ n/3 ⌋ 次的元素。

 

 

示例 1：

输入：[3,2,3]
输出：[3]
示例 2：

输入：nums = [1]
输出：[1]
示例 3：

输入：[1,1,1,3,3,2,2,2]
输出：[1,2]
 

提示：

1 <= nums.length <= 5 * 104
-109 <= nums[i] <= 109
 

进阶：尝试设计时间复杂度为 O(n)、空间复杂度为 O(1)的算法解决此问题。

```

*进阶：尝试设计时间复杂度为 O(n)、空间复杂度为 O(1)的算法解决此问题。*

**摩尔投票法：**

* 抽象模型：数组元素为候选人选票，要求选出票数超过票数总数的1/3的候选人

* 利用摩尔投票法，**剩下的候选人票数超过总票数的1/3的只可能有2个**

  ```
  选一个候选人，超过总票数的：1/2
  选两个候选人，超过总票数的：1/3
  选三个候选人，超过总票数的：1/4
  ...
  ```

  **选 n 个候选人，超过总票数的：1 / ( n+1 )**



*代码实现：*

```C++
class Solution{
public:
    vector<int> majorityElement(vector<int>& nums){
        vector<int> res;	// 结果数组
        int element_1=0;	// “候选人1”
        int element_2=0;	// "候选人2"
        int vote_1=0;		// “候选人1”票数
        int vote_2=0;		// "候选人2"票数
        
        for(int num:nums){
            if(vote_1>0 && num==element_1) vote_1++;		// 遇到候选人1，票数+1
            else if(vote_2>0 && num==element_2) vote_2++;	// 遇到候选人2，票数+1
            else if(vote_1==0) { element_1=num; vote_1++; }	// 之前候选人票数抵消完了，下一个票数拥有者票数+1，重新计票
            else if(vote_2==0) { element_2=num; vote_2++; }	// 同上
            else {	// 三个元素都不相同，两个候选人票数都-1 抵消
                vote_1--;
                vote_2--;
            }
        }
        
        int count_1=0; // 剩下候选人1的票数
        int count_2=0; // 剩下候选人2的票数
        for(int num:nums){	// 记录剩下两位候选人的票数
            if(vote_1>0 && num==element_1) count_1++;
            if(vote_2>0 && num==element_2) count_2++;
        }
        
        // 判断是否满足条件，满足则加入到结果数组中
        if(vote_1>0 && count_1>nums.size()/3) res.push_back(element_1);
        if(vote_2>0 && count_2>nums.size()/3) res.push_back(element_2);
    }
};
```

---

